CREATE TABLE "Geners" (
	"id"	INTEGER,
	"gener_name"	varchar(20) NOT NULL UNIQUE,
	PRIMARY KEY("id" AUTOINCREMENT)
);

CREATE TABLE "Books" (
	"id"	INTEGER,
	"book_name"	varchar(50) NOT NULL,
	"book_short_description"	varchar(100),
	"gener_id"	INTEGER,
	FOREIGN KEY("gener_id") REFERENCES "Geners"("id") ON DELETE SET NULL,
	PRIMARY KEY("id" AUTOINCREMENT)
);

CREATE TABLE "Writer" (
	"id"	INTEGER,
	"first_name"	varchar(20) NOT NULL,
	"last_name"	varchar(20) NOT NULL,
	"book_id"	INTEGER NOT NULL,
	"write_date"	date,
	FOREIGN KEY("book_id") REFERENCES "Books"("id"),
	PRIMARY KEY("id" AUTOINCREMENT)
);

CREATE TABLE "Library_branches" (
	"id"	INTEGER,
	"library_name"	varchar(30) NOT NULL,
	"library_address"	varchar(70),
	PRIMARY KEY("id" AUTOINCREMENT)
);

CREATE TABLE "Members" (
	"id"	INTEGER,
	"first_name"	varchar(20) NOT NULL,
	"last_name"	varchar(20) NOT NULL,
	"personal_id"	INTEGER(11) NOT NULL UNIQUE,
	"registration_date"	date NOT NULL,
	"library_id"	INTEGER NOT NULL,
	PRIMARY KEY("id" AUTOINCREMENT),
	FOREIGN KEY("library_id") REFERENCES "Library_branches"("id")
);

CREATE TABLE "Sections" (
	"id"	INTEGER,
	"section_name"	varchar(20) NOT NULL,
	"book_id"	INTEGER NOT NULL,
	"book_quantity"	INTEGER,
	"library_id"	INTEGER,
	FOREIGN KEY("book_id") REFERENCES "Books"("id") ON DELETE SET NULL,
	FOREIGN KEY("library_id") REFERENCES "Library_branches"("id") ON DELETE SET NULL,
	PRIMARY KEY("id" AUTOINCREMENT)
);

CREATE TABLE "Staff" (
	"id"	INTEGER,
	"first_name"	varchar(20) NOT NULL,
	"last_name"	varchar(20) NOT NULL,
	"personal_id"	INTEGER(11) NOT NULL UNIQUE,
	"woking_library_id"	INTEGER NOT NULL,
	FOREIGN KEY("woking_library_id") REFERENCES "Library_branches"("id") ON DELETE SET NULL,
	PRIMARY KEY("id" AUTOINCREMENT)
);


INSERT INTO Library_branches ("library_name", "library_address")
VALUES ("Vake Library", "z.paliashvili street");
INSERT INTO Library_branches ("library_name", "library_address")
VALUES ("Mediateka", "i.chavchavadze street");
INSERT INTO Library_branches ("library_name", "library_address")
VALUES ("Saburtalo Library", "pekini street");
INSERT INTO Library_branches ("library_name", "library_address")
VALUES ("Technical Library", "m.kostava street");

INSERT INTO Geners ("gener_name") VALUES ("Detective");
INSERT INTO Geners ("gener_name") VALUES ("Real Story");
INSERT INTO Geners ("gener_name") VALUES ("Fantasy");
INSERT INTO Geners ("gener_name") VALUES ("For Children");
INSERT INTO Geners ("gener_name") VALUES ("Comics");

INSERT INTO Books ("book_name", "book_short_description", "gener_id")
VALUES ("artsivi", "igavaraki", 4);
INSERT INTO Books ("book_name", "book_short_description", "gener_id")
VALUES ("datvi", "Fantasy", 4);
INSERT INTO Books ("book_name", "book_short_description", "gener_id")
VALUES ("Final Fantasy 7", "Fantasy", 3);

INSERT INTO Writer ("first_name", "last_name", "book_id", "write_date")
VALUES ("Luka", "Razikashvili", 1, "1903-02-23");
INSERT INTO Writer ("first_name", "last_name", "book_id", "write_date")
VALUES ("Luka", "Razikashvili", 2, "1902-07-23");
INSERT INTO Writer ("first_name", "last_name", "book_id", "write_date")
VALUES ("Ilia", "Chavchavadze", 3, "2020-07-23");

INSERT INTO Sections ("section_name", "book_id", "book_quantity", "library_id")
VALUES ("Section A", 1, 3, 1);
INSERT INTO Sections ("section_name", "book_id", "book_quantity", "library_id")
VALUES ("Section A", 1, 4, 3);
INSERT INTO Sections ("section_name", "book_id", "book_quantity", "library_id")
VALUES ("Section A", 2, 5, 1);
INSERT INTO Sections ("section_name", "book_id", "book_quantity", "library_id")
VALUES ("Section A", 2, 3, 3);
INSERT INTO Sections ("section_name", "book_id", "book_quantity", "library_id")
VALUES ("Section A", 2, 3, 2);
INSERT INTO Sections ("section_name", "book_id", "book_quantity", "library_id")
VALUES ("Section B", 3, 7, 2);
INSERT INTO Sections ("section_name", "book_id", "book_quantity", "library_id")
VALUES ("Section B", 3, 4, 3);
INSERT INTO Sections ("section_name", "book_id", "book_quantity", "library_id")
VALUES ("Section B", 3, 7, 2);